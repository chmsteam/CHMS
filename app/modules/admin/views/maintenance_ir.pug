
extends ../../../templates/navbaradmin.pug

block content
    section#services
        .right_col(role='main' style="background-color:transparent")
                .title_left
                    h5
                        | Maintenance /&nbsp
                        b Incident Report
                .row
                    .col-md-12.col-sm-12.col-xs-12
                        .x_panel(style='background-color:rgba(52,152,219,.3)')
                            .x_content
                                        button.btn.btn-success.btn-lg(type='button', data-toggle='modal', data-target='.bs-add-modal-xs')
                                            i.fa.fa-plus
                                            | &nbspAdd
                            .x_panel  
                                    br
                                    table#datatable.table.table-striped.table-bordered
                                        thead
                                            tr
                                                //- th ID NO.
                                                th(style="text-align:center")  INCIDENT REPORT
                                                th(style="text-align:center")  DESCRIPTION
                                                th(style="text-align:center")  LEVEL OF SEVERITY
                                                th(style="text-align:center")  STATUS
                                                th(style="text-align:center")  ACTION
                                        tbody
                                            each item in itemtab
                                                tr(style="text-align:center") 
                                                
                                                    //- td #{item.intID}
                                                    td #{item.strName}
                                                    td #{item.strDesc}
                                                    td #{item.strLevel}
                                                    td 
                                                        if item.strStatus=='Active'
                                                            p(hidden="") active
                                                            a(href="disable_incidentreport/"+item.intID)
                                                                input.js-switch(type='checkbox' checked)
                                                        else if item.strStatus=='Inactive'
                                                            p(hidden="") inactive
                                                            a(href="enable_incidentreport/"+item.intID)
                                                                input.js-switch(type='checkbox')
                                                        //- input.js-switch(type='checkbox', checked='') #{item.strStatus}
                                                    td
                                                        //- button.btn.btn-info(type='button')
                                                            i.fa.fa-eye
                                                            |   View
                                                        button.btn.btn-warning(type='button' data-toggle='modal', data-target='#editir', data-id=''+item.intID, data-name=''+item.strName, data-desc=''+item.strDesc, data-level=''+item.strLevel)
                                                            i.fa.fa-edit
                                                            |   Edit
                                                
                //- Add
                .modal.fade.bs-add-modal-xs(tabindex='-1', role='dialog', aria-hidden='true')
                    .modal-dialog.modal-xs
                        .modal-content
                            .modal-header(style="background-color:#EDEDED;")
                                button.close(type='button', data-dismiss='modal')
                                    span(aria-hidden='true') ×
                                h4#myModalLabel.modal-title Add an Incident Report
                            .modal-body
                               form#demo-form2.form-horizontal.form-label-left(method="POST" action="add_incidentreport")
                                .form-group
                                    br
                                    br
                                    label.control-label.col-md-3.col-sm-3.col-xs-12(for='incident-name')
                                        | Incident Name 
                                        span.required *
                                    .col-md-6.col-sm-6.col-xs-12
                                        input#first-name.form-control.col-md-7.col-xs-12(type='text', required='required', name='incidentname')
                                .form-group
                                    label.control-label.col-md-3.col-sm-3.col-xs-12
                                        | Description
                                        span.required *
                                    .col-md-6.col-sm-6.col-xs-12
                                        textarea.form-control(rows='3', placeholder='Add a description...' ,name='incidentdesc')
                                br
                                .ln_solid
                                .form-group.pull-right
                                    button.btn.btn-success(type='submit') Add
                                    button.btn.btn-primary(type='button', data-dismiss='modal') Cancel
                //- Edit
                #editir.modal.fade.bs-edit-modal-xs(tabindex='-1', role='dialog', aria-hidden='true')
                    .modal-dialog.modal-xs
                        .modal-content
                            .modal-header(style="background-color:#EDEDED;")
                                button.close(type='button', data-dismiss='modal')
                                    span(aria-hidden='true') ×
                                h4#myModalLabel.modal-title Edit Incident Report
                            .modal-body
                                form#demo-form2.form-horizontal.form-label-left(method="POST" action="edit_incidentreport")
                                    .form-group
                                        .col-md-6.col-sm-6.col-xs-12
                                            br
                                            br
                                            input.form-control.col-md-7.col-xs-12(type='text', id='id', required='required', name='incidentID' style="display:none;")                          
                                    .form-group
                                        label.control-label.col-md-3.col-sm-3.col-xs-12
                                            | Incident Name
                                            span.required *
                                        .col-md-6.col-sm-6.col-xs-12
                                            input.form-control.col-md-7.col-xs-12(type='text', id='name', required='required', name='incidentname')
                                    .form-group
                                        label.control-label.col-md-3.col-sm-3.col-xs-12
                                            | Description
                                            span.required *
                                        .col-md-6.col-sm-6.col-xs-12
                                            textarea.form-control(rows='3', id='desc', name='incidentdesc')
                                    .form-group
                                        label.control-label.col-md-3.col-sm-3.col-xs-12 Severity
                                        .col-md-6.col-sm-6.col-xs-12
                                            select(name='incidentlvl').form-control
                                                option(id='level')
                                                    i same as before.
                                                option(value='Low') Low
                                                option(value='High') High
                                                    
                                    br
                                    .ln_solid
                                    .form-group.pull-right
                                        button.btn.btn-success(type='submit') Update
                                        button.btn.btn-primary(type='button', data-dismiss='modal') Cancel

        //- for update
        //- script(type='text/javascript').
        //-      function copyID2(clicked_id) {
        //-         document.getElementById("txt11").value = clicked_id;
        //-     }
        //-     function copyName(clicked_name) {
        //-         document.getElementById("txt2").value = clicked_name;
        //-     }
        //-     function copyValue(clicked_value) {
        //-         document.getElementById("txt3").value = clicked_value;
        //-     }

    